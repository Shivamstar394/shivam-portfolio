<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shivam Mishra ‚Äî 3D Galaxy Portfolio</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Lenis smooth scrolling -->
  <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.30/dist/lenis.min.js"></script>

  <!-- Three.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <style>
    :root {
      --accent: #4ea1ff;
      --accent2: #7a4bff;
      --bg: #050305;
      --panel: rgba(255,255,255,0.03);
    }
    html,body{height:100%;margin:0;background:var(--bg);color:#eaf3ff;font-family:"Segoe UI",Roboto,Arial,sans-serif}
    a{color:var(--accent)}
    /* 3D canvas behind everything */
    canvas#bg { position:fixed; inset:0; width:100%; height:100%; z-index:-2; pointer-events:none; display:block; }
    /* fallback gradient behind canvas (visible if canvas transparent) */
    .bg-fallback { position:fixed; inset:0; z-index:-3; background: radial-gradient(ellipse at center, #081121 0%, #030203 60%); }

    /* Header nav */
    .navbar-custom {
      position:fixed; top:0; left:0; right:0; z-index:40;
      display:flex; justify-content:space-between; align-items:center; padding:10px 22px;
      background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.12));
      backdrop-filter: blur(6px); border-bottom:1px solid rgba(255,255,255,0.03);
    }
    .nav-links a { color:#f6f9ff; font-weight:600; margin-left:16px; text-decoration:none; padding:6px 8px; border-radius:8px; }
    .nav-links a:hover { color:var(--accent); background:rgba(255,255,255,0.02) }

    main{position:relative; z-index:2}
    section{padding:90px 6%; min-height:60vh}
    .section-title { font-size:2.3rem; text-align:center; margin-bottom:22px; color:#eaf3ff }

    /* Hero */
    #hero { display:flex; align-items:center; justify-content:center; flex-direction:column; min-height:88vh; text-align:center }
    #hero h1 { font-size:3.6rem; margin:0; color:#fff; text-shadow: 0 20px 40px rgba(78,161,255,0.08) }
    #hero p { margin-top:14px; color:rgba(230,240,255,0.78) }
    .cta { margin-top:26px; padding:12px 28px; border-radius:999px; background:linear-gradient(90deg,var(--accent),var(--accent2)); color:white; font-weight:700; box-shadow:0 12px 38px rgba(78,161,255,0.12) }

    .panel { background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:18px; border-radius:12px; box-shadow:0 16px 40px rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.03) }

    /* skills & projects */
    .skills-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:14px }
    .skill { padding:14px; text-align:center; border-radius:10px; background:var(--panel); transition:transform .22s ease; }
    .skill:hover { transform:translateY(-8px); background: rgba(78,161,255,0.06) }

    .projects-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:18px }
    .project-card { padding:14px; border-radius:12px; background:var(--panel) }

    /* contact */
    .contact-wrap { max-width:880px; margin:0 auto; display:grid; gap:12px }
    .contact-row { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px }
    input, textarea { background: rgba(255,255,255,0.03); color:#eaf3ff; border:none; padding:12px; border-radius:8px }
    button[type="submit"] { padding:12px 20px; border-radius:999px; border:none; background:linear-gradient(90deg,var(--accent),var(--accent2)); color:white; font-weight:700 }

    footer{padding:24px 6%; text-align:center; color:rgba(230,240,255,0.6)}

    @media (max-width:900px){
      #hero h1 { font-size:2.2rem }
      .navbar-custom { padding:8px 12px }
    }

    /* small UI for WebGL fallback */
    .no-webgl { position:fixed; top:72px; right:18px; z-index:45; padding:8px 12px; background:#fff6; color:#200; border-radius:8px; font-weight:700; display:none }
  </style>
</head>
<body>

  <!-- Fallback gradient behind canvas -->
  <div class="bg-fallback" aria-hidden="true"></div>

  <!-- WebGL canvas -->
  <canvas id="bg" aria-hidden="true"></canvas>
  <div id="no-webgl" class="no-webgl">WebGL unavailable ‚Äî visual fallback active.</div>

  <!-- Nav -->
  <header class="navbar-custom">
    <div class="nav-left fw-bold" style="color:#fff">Shivam</div>
    <nav class="nav-links d-flex align-items-center">
      <a href="#hero" data-target="#hero">Home</a>
      <a href="#about" data-target="#about">About</a>
      <a href="#skills" data-target="#skills">Skills</a>
      <a href="#projects" data-target="#projects">Projects</a>
      <a href="#resume" id="resume-link" data-target="#resume">Resume</a>
      <a href="#contact" data-target="#contact">Contact</a>
    </nav>
  </header>

  <main>
    <!-- HERO -->
    <section id="hero">
      <div class="container text-center">
        <h1>Hi, I'm Shivam Mishra</h1>
        <p>FULL STACK DEVELOPER | MERN | SQL | AI-ML SPECIALIZATION | MOBILE-APP DEVELOPER</p>
        <a class="cta" id="hireBtn" href="#contact">Hire Me</a>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about">
      <h2 class="section-title">About Me</h2>
      <div class="panel text-center mx-auto" style="max-width:980px">
        <p>I'm a passionate MCA student at DMIHER, with strong skills in MERN stack, SQL/NoSQL DBs, With practical experience of using AI/ML tools & DevOps tools. I love building impactful apps and solving real-world problems.</p>
      </div>
    </section>

    <!-- SKILLS -->
    <section id="skills">
      <h2 class="section-title">Skills</h2>
      <div class="skills-grid">
        <div class="skill panel"><i class="fab fa-html5 fa-2x"></i><div>HTML5</div></div>
        <div class="skill panel"><i class="fab fa-js fa-2x"></i><div>JavaScript</div></div>
        <div class="skill panel"><i class="fab fa-react fa-2x"></i><div>React</div></div>
        <div class="skill panel"><i class="fas fa-database fa-2x"></i><div>MySQL / MongoDB</div></div>
        <div class="skill panel"><i class="fab fa-python fa-2x"></i><div>Python</div></div>
        <div class="skill panel"><i class="fab fa-bootstrap fa-2x"></i><div>Bootstrap</div></div>
        <div class="skill panel"><i class="fab fa-android fa-2x"></i><div>Android Dev</div></div>
        <div class="skill panel"><i class="fab fa-node-js fa-2x"></i><div>Node.js</div></div>
        <div class="skill panel"><i class="fab fa-git-alt fa-2x"></i><div>Git</div></div>
        <div class="skill panel"><i class="fab fa-docker fa-2x"></i><div>Docker</div></div>
        <div class="skill panel"><i class="fab fa-aws fa-2x"></i><div>AWS</div></div>
        <div class="skill panel"><i class="fab fa-css3-alt fa-2x"></i><div>CSS3</div></div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects">
      <h2 class="section-title">Projects</h2>
      <div class="projects-grid">
        <!-- keep your original project content -->
        <div class="project-card panel">
          <h5>üîê MERN Stack Authentication</h5>
          <p>Login/Register app using React, Node, MongoDB with JWT, bcrypt, and role-based access.</p>
          <div><a href="https://github.com/shivamstar394/mern-auth-app" target="_blank">GitHub</a></div>
        </div>
        <div class="project-card panel">
          <h5>üå§ Weather App</h5>
          <p>Weather forecast app using OpenWeatherMap API with real-time data and location support.</p>
          <div><a href="https://your-weather-app.netlify.app" target="_blank">Live Demo</a></div>
        </div>
        <!-- (Add the rest of your projects ‚Äî keep exact links) -->
      </div>
    </section>

    <!-- RESUME -->
    <section id="resume">
      <h2 class="section-title">üìÑ My Resume</h2>
      <div class="text-center">
        <a id="downloadResume" class="cta" href="https://shivamstar394.github.io/shivam-portfolio/Resume(Shivam Mishra).pdf" target="_blank">Download Resume</a>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact">
      <h2 class="section-title">Contact</h2>
      <div class="panel contact-wrap">
        <form action="https://formsubmit.co/itsmike0909@gmail.com" method="POST" class="" style="display:grid; gap:10px;">
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_next" value="https://shivammishra.live/thank-you.html">
          <div class="contact-row">
            <input name="name" type="text" placeholder="Your Name" required>
            <input name="email" type="email" placeholder="Your Email" required>
          </div>
          <textarea name="message" rows="6" placeholder="Your Message" required></textarea>
          <div style="display:flex; justify-content:center;">
            <button type="submit">Send Message</button>
          </div>
        </form>

        <p class="text-center mt-3">
          Connect with me on
          <a href="https://www.linkedin.com/in/shivam-mishra-5049ab192" target="_blank" style="margin-left:8px;"><i class="fab fa-linkedin"></i> LinkedIn</a>
        </p>
      </div>
    </section>

    <footer>&copy; 2025 Shivam Mishra. All Rights Reserved.</footer>
  </main>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- ---------- Three.js Galaxy + Lenis + GSAP integration ---------- -->
  <script>
  (function(){
    // WebGL check
    function webglAvailable(){
      try { const c = document.createElement('canvas'); return !!(window.WebGLRenderingContext && (c.getContext('webgl') || c.getContext('experimental-webgl'))); }
      catch(e){ return false; }
    }
    if(!webglAvailable()){
      document.getElementById('no-webgl').style.display = 'block';
      return;
    }

    // Lenis smooth scroll
    const lenis = new Lenis({
      duration: 1.2,
      easing: t => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
      smoothWheel: true,
      smoothTouch: true,
      wheelMultiplier: 1,
    });
    function raf(time){ lenis.raf(time); requestAnimationFrame(raf); }
    requestAnimationFrame(raf);
    gsap.registerPlugin(ScrollTrigger);
    lenis.on('scroll', ScrollTrigger.update);

    // three.js init
    const canvas = document.getElementById('bg');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.outputEncoding = THREE.sRGBEncoding;

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(65, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 0, 10);

    // load nebula texture (uploaded file path)
    const nebulaPath = "/mnt/data/f4511a47-fcad-4dcf-a554-96c56b863e92.png";
    const loader = new THREE.TextureLoader();
    loader.setCrossOrigin('');
    let nebulaTex = null;
    loader.load(nebulaPath,
      tex => { nebulaTex = tex; nebulaTex.wrapS = nebulaTex.wrapT = THREE.RepeatWrapping; nebulaTex.repeat.set(1.1, 1.1); },
      undefined,
      err => { console.warn('Nebula texture load failed, using fallback color.'); nebulaTex = null; }
    );

    // particle sprite generator (soft circle)
    function makeSprite(colorInner='rgba(255,255,255,1)', colorOuter='rgba(150,200,255,0.15)'){
      const s = 128;
      const c = document.createElement('canvas'); c.width = c.height = s;
      const ctx = c.getContext('2d');
      const g = ctx.createRadialGradient(s/2,s/2,0,s/2,s/2,s/2);
      g.addColorStop(0, colorInner);
      g.addColorStop(0.15, 'rgba(255,255,255,0.9)');
      g.addColorStop(0.4, colorOuter);
      g.addColorStop(1, 'rgba(0,0,0,0)');
      ctx.fillStyle = g;
      ctx.fillRect(0,0,s,s);
      return new THREE.CanvasTexture(c);
    }
    const particleSprite = makeSprite();

    // responsive particle count
    const isMobile = window.innerWidth < 900;
    const PARTICLES = isMobile ? 6000 : 20000;
    const ARMS = 5;
    const RADIUS = 7.5;
    const SPIN = 2.6;

    // geometry attributes
    const positions = new Float32Array(PARTICLES * 3);
    const colors = new Float32Array(PARTICLES * 3);
    const sizes = new Float32Array(PARTICLES);

    const colorInside = new THREE.Color(0xffffff);
    const colorOutside = new THREE.Color(0x4ea1ff);

    for (let i=0; i<PARTICLES; i++){
      const i3 = i*3;
      const radius = Math.pow(Math.random(), 1.1) * RADIUS;
      const branch = i % ARMS;
      const branchAngle = (branch / ARMS) * Math.PI * 2;
      const spinAngle = radius * SPIN;
      const spread = (1 - radius / RADIUS) * 0.9;
      const randomX = (Math.random()-0.5) * 0.6 * spread;
      const randomY = (Math.random()-0.5) * 0.4 * spread;
      const randomZ = (Math.random()-0.5) * 0.8 * (radius / RADIUS);

      const angle = branchAngle + spinAngle + (Math.random()-0.5) * 0.5;

      const x = Math.cos(angle) * radius + randomX;
      const y = Math.sin(angle) * radius + randomY;
      const z = - (radius / RADIUS) * 2 + randomZ;

      positions[i3] = x;
      positions[i3+1] = y;
      positions[i3+2] = z;

      const mixed = colorInside.clone().lerp(colorOutside, radius / RADIUS);
      mixed.toArray(colors, i3);

      sizes[i] = 0.8 + Math.random() * 2.8;
    }

    const geometry = new THREE.BufferGeometry();
    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
    geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

    // Points material ‚Äî lets particles feel bright and depthful
    const material = new THREE.PointsMaterial({
      size: 0.06,
      map: particleSprite,
      vertexColors: true,
      transparent: true,
      opacity: 0.95,
      depthWrite: false,
      blending: THREE.AdditiveBlending,
      sizeAttenuation: true
    });

    const galaxy = new THREE.Points(geometry, material);
    scene.add(galaxy);

    // add nebula plane behind
    const nebGeom = new THREE.PlaneBufferGeometry(36, 18, 1, 1);
    const nebMat = new THREE.MeshBasicMaterial({
      map: nebulaTex || null,
      color: nebulaTex ? 0xffffff : 0x082a34,
      transparent: true,
      opacity: nebulaTex ? 0.95 : 0.12,
      blending: THREE.AdditiveBlending,
      depthWrite: false
    });
    const nebPlane = new THREE.Mesh(nebGeom, nebMat);
    nebPlane.position.set(0, 0, -14);
    nebPlane.rotation.z = 0.12;
    scene.add(nebPlane);

    // glow sprite behind hero
    const glowTex = makeSprite('rgba(120,185,255,0.16)', 'rgba(150,80,255,0.06)');
    const glow = new THREE.Sprite(new THREE.SpriteMaterial({ map: glowTex, blending: THREE.AdditiveBlending, transparent: true, opacity: 0.9, depthWrite: false }));
    glow.scale.set(8, 4, 1);
    glow.position.set(0, -0.6, -6);
    scene.add(glow);

    // meteors group
    const meteorGroup = new THREE.Group();
    scene.add(meteorGroup);
    function spawnMeteor(){
      const g = new THREE.BufferGeometry();
      const pts = new Float32Array(6);
      const sx = (Math.random()-0.5)*14;
      const sy = 8 + Math.random()*2;
      pts[0]=sx; pts[1]=sy; pts[2]=-2;
      pts[3]=sx - (6 + Math.random()*6); pts[4]= sy - (4 + Math.random()*6); pts[5]=-8;
      g.setAttribute('position', new THREE.BufferAttribute(pts, 3));
      const mat = new THREE.LineBasicMaterial({ color: 0x9fe0ff, transparent: true, opacity: 0.9 });
      const line = new THREE.Line(g, mat);
      meteorGroup.add(line);
      gsap.to(line.position, { x: -12, y: -12, z: 0, duration: 1.4 + Math.random()*1.2, ease: 'power2.out', onComplete: ()=> meteorGroup.remove(line) });
    }
    setInterval(()=>{ if (Math.random() < 0.18) spawnMeteor(); }, 900);

    // mouse parallax
    let mouseX=0, mouseY=0;
    window.addEventListener('mousemove', (e)=>{ mouseX = (e.clientX / window.innerWidth) * 2 - 1; mouseY = (e.clientY / window.innerHeight) * 2 - 1; }, {passive:true});

    // scroll -> camera z mapping using lenis scroll
    let scrollValue = 0;
    lenis.on('scroll', ({ scroll }) => { scrollValue = scroll; });

    const clock = new THREE.Clock();
    function animate(){
      const t = clock.getElapsedTime();

      // galaxy gentle rotation and twinkle
      galaxy.rotation.z = Math.sin(t*0.05)*0.06;
      galaxy.rotation.y += 0.0007;

      const sizeAttr = geometry.attributes.size.array;
      for(let i=0;i<sizeAttr.length;i++){
        sizeAttr[i] = sizeAttr[i] * (0.985 + 0.04 * Math.sin(i*0.119 + t*2.0));
      }
      geometry.attributes.size.needsUpdate = true;

      // nebula drift if texture exists
      if (nebPlane.material.map) { nebPlane.material.map.offset.x += 0.00009; nebPlane.material.map.offset.y += 0.00004; }
      else nebPlane.rotation.z += 0.00006;

      // glow float
      glow.material.opacity = 0.75 + Math.sin(t*0.9)*0.06;
      glow.position.x = Math.sin(t*0.23) * 0.06;

      // camera movement: scroll influences z (smooth)
      const docHeight = document.body.scrollHeight - window.innerHeight;
      const scrollFactor = docHeight > 0 ? (scrollValue / docHeight) : 0;
      const targetZ = 10 - scrollFactor * 6; // camera z goes from 10 -> 4
      camera.position.z += (targetZ - camera.position.z) * 0.08;

      // camera follow mouse small offset
      const camTargetX = mouseX * 0.75;
      const camTargetY = -mouseY * 0.35;
      camera.position.x += (camTargetX - camera.position.x) * 0.06;
      camera.position.y += (camTargetY - camera.position.y) * 0.06;
      camera.lookAt(0,0,0);

      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }
    requestAnimationFrame(animate);

    // resize
    function onResize(){ renderer.setSize(window.innerWidth, window.innerHeight); camera.aspect = window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)); }
    window.addEventListener('resize', onResize, {passive:true});

    // smooth nav clicks (lenis)
    document.querySelectorAll('.nav-links a, #hireBtn, #downloadResume').forEach(el=>{
      el.addEventListener('click', (ev)=>{
        ev.preventDefault();
        const target = el.getAttribute('data-target') || el.getAttribute('href');
        if(!target) return;
        // special zoom feel for resume
        if(target === '#resume' || el.id === 'downloadResume'){
          gsap.to(camera.position, { z: camera.position.z - 1.4, duration: 0.45, ease: 'power2.out', onComplete(){
            lenis.scrollTo(target, { offset: -72, duration: 1.0, easing: t=>t });
            gsap.to(camera.position, { z: 10, duration: 1.2, delay: 0.5, ease: 'power2.out' });
          }});
        } else {
          lenis.scrollTo(target, { offset: -72, duration: 1.0, easing: t=>t });
        }
      });
    });

    // GSAP reveal for sections
    gsap.utils.toArray('section').forEach(sec=>{
      gsap.from(sec, { scrollTrigger: { trigger: sec, start: 'top 85%' }, y: 30, opacity:0, duration:0.9, ease:'power2.out' });
    });
    window.addEventListener('load', ()=> ScrollTrigger.refresh());
  })();
  </script>

</body>
</html>
