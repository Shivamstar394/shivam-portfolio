<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shivam Mishra ‚Äî 3D Galaxy Portfolio</title>

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <!-- Three.js r128 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

  <style>
    /* ---------- Base ---------- */
    :root {
      --accent: #0d6efd;
      --glass: rgba(255,255,255,0.06);
      --glass-strong: rgba(255,255,255,0.09);
    }
    html,body{height:100%;margin:0;background:#050405;color:#e8eefc;font-family: "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;}
    a{color:var(--accent);text-decoration:none}
    /* Canvas behind content */
    #bg-canvas{
      position:fixed; inset:0; width:100%; height:100%;
      display:block; z-index:-1; pointer-events:none;
      background: radial-gradient(ellipse at center, rgba(18,18,20,0.6), #030203 60%);
    }

    /* Navbar */
    .navbar{
      position:fixed; top:0; left:0; right:0; z-index:5;
      display:flex; justify-content:space-between; align-items:center;
      padding:12px 28px; backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.12));
      border-bottom: 1px solid rgba(255,255,255,0.03);
    }
    .nav-left{font-weight:600}
    .nav-links{display:flex; gap:18px; align-items:center}
    .nav-links a{font-weight:600; color:#f7f9ff; opacity:0.95}
    .nav-links a:hover{color:var(--accent)}
    .burger{display:none}

    /* Layout sections */
    main{position:relative; z-index:2}
    section{padding:100px 6%; position:relative; z-index:2}
    .section-title{font-size:2.4rem; text-align:center; margin-bottom:28px; color:#f3f7ff; text-shadow: 0 6px 30px rgba(13,110,253,0.08)}

    /* Hero */
    #hero{display:flex; align-items:center; justify-content:center; flex-direction:column; min-height:84vh; text-align:center}
    #hero h1{font-size:3.6rem; margin:0; letter-spacing:0.6px; line-height:1; color:#fff; text-shadow: 0 6px 30px rgba(13,110,253,0.15)}
    #hero p{margin-top:18px; color:rgba(230,235,255,0.8); letter-spacing:0.6px}
    .cta {margin-top:28px; display:inline-block; padding:12px 26px; border-radius:999px; background:linear-gradient(90deg,var(--accent),#6610f2); color:white; font-weight:700; box-shadow: 0 6px 30px rgba(13,110,253,0.18)}
    .hero-subtle{margin-top:18px; color:rgba(220,226,255,0.55)}

    /* Content panels (glass) */
    .panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:18px;
      box-shadow: 0 8px 30px rgba(3,3,6,0.6);
      border: 1px solid rgba(255,255,255,0.03);
    }

    /* Skills */
    .skills-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:18px}
    .skill {text-align:center; padding:18px; border-radius:10px; background:var(--glass); transition:transform .28s ease, background .28s ease}
    .skill:hover{transform:translateY(-10px) scale(1.02); background:var(--glass-strong)}
    .skill i{font-size:34px; margin-bottom:8px; color:#fff}

    /* Projects */
    .projects-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:22px}
    .project-card{padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); transition:transform .25s ease; border:1px solid rgba(255,255,255,0.03)}
    .project-card:hover{transform:translateY(-8px)}
    .project-card h5{margin:0 0 10px 0}
    .project-links a{margin-right:12px; font-weight:600}

    /* Contact form */
    .contact-wrap{max-width:860px;margin:0 auto; display:grid; gap:12px}
    .contact-row{display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:12px}
    input, textarea{
      background:rgba(255,255,255,0.03); color:#e9f0ff; border:none; padding:12px; border-radius:8px; resize:vertical;
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.5)
    }
    button[type="submit"]{padding:12px 20px; border-radius:999px; border:none; background:linear-gradient(90deg,var(--accent),#6610f2); color:white; font-weight:700; cursor:pointer}

    /* Footer */
    footer{padding:26px 6%; text-align:center; color:rgba(230,235,255,0.6)}

    /* Responsive */
    @media (max-width:900px){
      .navbar{padding:10px 16px}
      .nav-links{gap:12px}
      h1{font-size:2.4rem}
      .burger{display:block}
    }

    /* Accessibility: no WebGL fallback */
    .no-webgl{
      position:fixed; top:70px; right:18px; z-index:6; padding:8px 12px; background:#ffeded; color:#400; border-radius:8px; font-weight:600; display:none;
    }
  </style>
</head>
<body>

  <!-- Canvas (3D background) -->
  <canvas id="bg-canvas"></canvas>
  <div class="no-webgl" id="no-webgl">WebGL unavailable ‚Äî visual fallback active.</div>

  <!-- Navbar -->
  <header class="navbar" role="banner">
    <div class="nav-left">Shivam</div>
    <nav class="nav-links" role="navigation" aria-label="Main navigation">
      <a href="#hero">Home</a>
      <a href="#about">About</a>
      <a href="#skills">Skills</a>
      <a href="#projects">Projects</a>
      <a href="#resume">Resume</a>
      <a href="#contact">Contact</a>
    </nav>
  </header>

  <!-- Main content -->
  <main>
    <!-- HERO -->
    <section id="hero" aria-label="Hero">
      <div style="max-width:1100px;margin:0 auto;">
        <h1 id="hero-title">Hi, I'm Shivam Mishra</h1>
        <p class="hero-subtle">FULL STACK DEVELOPER | MERN | SQL | AI-ML SPECIALIZATION | MOBILE-APP DEVELOPER</p>
        <a href="#contact" class="cta">Hire Me</a>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" aria-label="About">
      <h2 class="section-title">About Me</h2>
      <div class="panel" style="max-width:980px;margin:0 auto;text-align:center">
        <p>I'm a passionate MCA student at DMIHER, with strong skills in MERN stack, SQL/NoSQL DBs,
        With practical experience of using AI/ML tools & DevOps tools. I love building impactful apps and solving real-world problems.</p>
      </div>
    </section>

    <!-- SKILLS -->
    <section id="skills" aria-label="Skills" class="">
      <h2 class="section-title">Skills</h2>
      <div class="skills-grid">
        <div class="skill panel"><i class="fab fa-html5"></i><div>HTML5</div></div>
        <div class="skill panel"><i class="fab fa-js"></i><div>JavaScript</div></div>
        <div class="skill panel"><i class="fab fa-react"></i><div>React</div></div>
        <div class="skill panel"><i class="fas fa-database"></i><div>MySQL / MongoDB</div></div>
        <div class="skill panel"><i class="fab fa-python"></i><div>Python</div></div>
        <div class="skill panel"><i class="fab fa-bootstrap"></i><div>Bootstrap</div></div>
        <div class="skill panel"><i class="fab fa-android"></i><div>Android Development</div></div>
        <div class="skill panel"><i class="fab fa-node-js"></i><div>Node.js</div></div>
        <div class="skill panel"><i class="fab fa-git-alt"></i><div>Git</div></div>
        <div class="skill panel"><i class="fab fa-docker"></i><div>Docker</div></div>
        <div class="skill panel"><i class="fab fa-aws"></i><div>AWS</div></div>
        <div class="skill panel"><i class="fab fa-css3-alt"></i><div>CSS3</div></div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" aria-label="Projects">
      <h2 class="section-title">Projects</h2>
      <div class="projects-grid">
        <!-- keep your project content exactly as provided -->
        <div class="project-card panel">
          <h5>üîê MERN Stack Authentication</h5>
          <p>Login/Register app using React, Node, MongoDB with JWT, bcrypt, and role-based access.</p>
          <div class="project-links">
            <a href="https://github.com/shivamstar394/mern-auth-app" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>üå§ Weather App</h5>
          <p>Weather forecast app using OpenWeatherMap API with real-time data and location support.</p>
          <div class="project-links">
            <a href="https://your-weather-app.netlify.app" target="_blank" rel="noopener">Live Demo</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>üçî Food Express Website</h5>
          <p>A responsive restaurant landing page with menu, order now section and animations using Bootstrap.</p>
          <div class="project-links">
            <a href="https://killerwebsite777.netlify.app" target="_blank" rel="noopener">Live Demo</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>‚úîÔ∏è Form Validation</h5>
          <p>A form validation project using HTML, CSS, and JavaScript to ensure user input is correct and complete.</p>
          <div class="project-links">
            <a href="https://formvalidation8787.netlify.app" target="_blank" rel="noopener">Live Demo</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>üõçÔ∏è FashionMall Dashboard</h5>
          <p>An interactive admin dashboard for managing orders, products, and analytics using React and Chart.js.</p>
          <div class="project-links">
            <a href="https://fashionmalldashboard.netlify.app/" target="_blank" rel="noopener">Live Demo</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>‚ö° Reaction Tester Game</h5>
          <p>A browser game to test your reaction speed using JavaScript, DOM manipulation, and timers.</p>
          <div class="project-links">
            <a href="https://reactiontester9090.netlify.app/" target="_blank" rel="noopener">Live Demo</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>üìù ToDo List App</h5>
          <p>A full-featured task manager built with MERN stack. Add, update, and delete your daily tasks efficiently.</p>
          <div class="project-links">
            <a href="https://project-3-3qiz.onrender.com/" target="_blank" rel="noopener">Live Demo</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>üìü SLM Edge Device AI</h5>
          <p>Runs the DeepSeek-1.5B model completely offline ensuring data privacy with no cloud dependency.</p>
          <div class="project-links">
            <a href="https://www.linkedin.com/embed/feed/update/urn:li:ugcPost:7350483123391848449?compact=1" target="_blank" rel="noopener">Demo Video</a>
            <a href="https://github.com/shivamstar394/SLM-Edge-Device-AI" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>üò∑ Face Mask Detection AI</h5>
          <p>A computer vision project built with Python, TensorFlow, OpenCV, and Jupyter Notebook for detecting face masks in real-time video streams.</p>
          <div class="project-links">
            <a href="https://www.linkedin.com/embed/feed/update/urn:li:ugcPost:7353155091966611457?collapsed=1" target="_blank" rel="noopener">Demo Video</a>
            <a href="https://github.com/shivamstar394/Face-Mask-Detection" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>üìà Option Trading Bot (RL Powered)</h5>
          <p>A cutting-edge AI trading bot using Reinforcement Learning (PPO) and LSTM to predict NIFTY movements and automate option trading decisions.</p>
          <div class="project-links">
            <a href="https://www.linkedin.com/embed/feed/update/urn:li:ugcPost:7358078551029342208?collapsed=" target="_blank" rel="noopener">Demo Video</a>
            <a href="https://github.com/shivamstar394/option_trading_bot" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>ü§ñ Jarvis Assistant AI</h5>
          <p>A voice-controlled AI assistant built with Python, speech recognition, and text-to-speech. It performs web searches, sends emails, and automates daily tasks efficiently.</p>
          <div class="project-links">
            <a href="https://www.linkedin.com/posts/shivam-mishra-5049ab192_artificialintelligence-python-automation-activity-7362447018817900544-RaSG?utm_source=share&utm_medium=member_desktop&rcm=ACoAAC1agxQBwVdDMMa2lSDd_7otDbhXW2_cFng" target="_blank" rel="noopener">Demo Video</a>
            <a href="https://github.com/shivamstar394/Jarvis-Assistant-AI" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>üìà Option Trading Bot (LIVE DATA)</h5>
          <p>A live-option trading bot built with Python that processes real-time market data, implements multiple trading strategies, and sends instant trade alerts via a Telegram bot.</p>
          <div class="project-links">
            <a href="https://www.linkedin.com/posts/shivam-mishra-5049ab192_optionstrading-algorithmictrading-pythondeveloper-activity-7363144218019569665-i1ee?utm_source=share&utm_medium=member_desktop&rcm=ACoAAC1agxQBwVdDMMa2lSDd_7otDbhXW2_cFng" target="_blank" rel="noopener">Demo Video</a>
            <a href="https://github.com/Shivamstar394/smart-option-bot.git" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>ü§ñ LSTM-based NIFTY Signal Prediction</h5>
          <p>An LSTM deep learning model trained on <b>28 years of NIFTY data (1996‚Äì2024)</b>... Achieved <b>88% accuracy</b> in predicting signals.</p>
          <div class="project-links">
            <a href="https://www.linkedin.com/posts/shivam-mishra-5049ab192_" target="_blank" rel="noopener">Demo Video</a>
            <a href="https://github.com/shivamstar394/NIFTY-LSTM-Prediction" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>

        <div class="project-card panel">
          <h5>üí¨ Real-time Chat App (MySQL + Socket.IO)</h5>
          <p>A full-stack <b>real-time chat application</b> built using <b>Node.js, Express, Socket.IO, and MySQL</b>.</p>
          <div class="project-links">
            <a href="https://www.linkedin.com/posts/shivam-mishra-5049ab192_fullstackdevelopment-nodejs-socketio-activity-7378015472031797248-SEJh?utm_source=share&utm_medium=member_desktop&rcm=ACoAAC1agxQBwVdDMMa2lSDd_7otDbhXW2_cFng" target="_blank" rel="noopener">Live Demo</a>
            <a href="https://github.com/Shivamstar394/alignbox_chat.git" target="_blank" rel="noopener">GitHub</a>
          </div>
        </div>

      </div>
    </section>

    <!-- RESUME -->
    <section id="resume" aria-label="Resume">
      <h2 class="section-title">üìÑ My Resume</h2>
      <div style="text-align:center">
        <a href="https://shivamstar394.github.io/shivam-portfolio/Resume(Shivam Mishra).pdf" class="cta" target="_blank" rel="noopener">Download Resume</a>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" aria-label="Contact">
      <h2 class="section-title">Contact</h2>
      <div class="panel contact-wrap">
        <form action="https://formsubmit.co/itsmike0909@gmail.com" method="POST" class="" style="display:grid; gap:12px;">
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_next" value="https://shivammishra.live/thank-you.html">
          <div class="contact-row">
            <input name="name" type="text" placeholder="Your Name" required>
            <input name="email" type="email" placeholder="Your Email" required>
          </div>
          <textarea name="message" rows="6" placeholder="Your Message" required></textarea>
          <div style="display:flex; justify-content:center; margin-top:6px;">
            <button type="submit">Send Message</button>
          </div>
        </form>

        <p style="text-align:center; margin-top:10px;">
          Connect with me on
          <a href="https://www.linkedin.com/in/shivam-mishra-5049ab192" target="_blank" rel="noopener" style="margin-left:6px;">
            <i class="fab fa-linkedin"></i> LinkedIn
          </a>
        </p>
      </div>
    </section>

    <footer>
      &copy; 2025 Shivam Mishra. All Rights Reserved.
    </footer>
  </main>

  <!-- ---------- Three.js Galaxy Script ---------- -->
  <script>
  (function () {
    // Helper: detect WebGL
    function webglAvailable() {
      try {
        const canvas = document.createElement("canvas");
        return !!( window.WebGLRenderingContext &&
          (canvas.getContext("webgl") || canvas.getContext("experimental-webgl")) );
      } catch (e) { return false; }
    }
    if (!webglAvailable()) {
      document.getElementById('no-webgl').style.display = 'block';
      return;
    }

    /* ---------------- Scene, Camera, Renderer ---------------- */
    const canvas = document.getElementById('bg-canvas');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.toneMapping = THREE.ACESFilmicToneMapping;
    renderer.outputEncoding = THREE.sRGBEncoding;

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
    camera.position.set(0, 0, 6);

    /* --------------- Load nebula texture (user uploaded file) --------------- */
    // The system will transform this path to a working URL in your deployment.
    const nebulaTextureURL = "/mnt/data/f4511a47-fcad-4dcf-a554-96c56b863e92.png";

    const loader = new THREE.TextureLoader();
    loader.setCrossOrigin("");
    loader.load(
      nebulaTextureURL,
      function (tex) {
        tex.wrapS = tex.wrapT = THREE.MirroredRepeatWrapping;
        addNebulaPlane(tex);
      },
      undefined,
      function () {
        // failed to load: fallback subtle color plane
        addNebulaPlane(null);
      }
    );

    /* ---------------- Nebula Layer (plane with additive blending) ---------------- */
    let nebulaMesh;
    function addNebulaPlane(texture) {
      const geom = new THREE.PlaneBufferGeometry(24, 12, 1, 1);
      const mat = new THREE.MeshBasicMaterial({
        map: texture || null,
        color: texture ? 0xffffff : 0x0c4b8f,
        transparent: true,
        opacity: texture ? 0.95 : 0.18,
        blending: THREE.AdditiveBlending,
        depthWrite: false,
      });
      nebulaMesh = new THREE.Mesh(geom, mat);
      nebulaMesh.position.set(0, 0, -10);
      nebulaMesh.rotation.z = 0.12;
      scene.add(nebulaMesh);
    }

    /* ---------------- Star Field ---------------- */
    const starGroup = new THREE.Group();
    scene.add(starGroup);

    function makeStars(count, sizeRange, zRange, colorHex, opacity) {
      const geometry = new THREE.BufferGeometry();
      const positions = new Float32Array(count*3);
      const sizes = new Float32Array(count);
      const colors = new Float32Array(count*3);

      for (let i=0;i<count;i++){
        const i3 = i*3;
        positions[i3] = (Math.random()*2-1) * 40;
        positions[i3+1] = (Math.random()*2-1) * 20;
        positions[i3+2] = -Math.random() * zRange - 2;
        sizes[i] = sizeRange[0] + Math.random()*(sizeRange[1]-sizeRange[0]);

        const c = new THREE.Color(colorHex);
        c.toArray(colors, i3);
      }

      geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
      geometry.setAttribute('aSize', new THREE.BufferAttribute(sizes, 1));
      geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

      // small circular sprite via canvas
      const sprite = new THREE.Texture(generateStarSprite('#ffffff'));
      sprite.needsUpdate = true;

      const material = new THREE.PointsMaterial({
        size: 0.05,
        map: sprite,
        vertexColors: true,
        transparent: true,
        opacity: opacity,
        depthWrite: false,
        blending: THREE.AdditiveBlending,
        sizeAttenuation: true
      });

      const points = new THREE.Points(geometry, material);
      starGroup.add(points);
      return points;
    }

    // generate sprite canvas for stars
    function generateStarSprite(color){
      const size = 128;
      const canvas = document.createElement('canvas');
      canvas.width = canvas.height = size;
      const ctx = canvas.getContext('2d');
      const grad = ctx.createRadialGradient(size/2, size/2, 0, size/2, size/2, size/2);
      grad.addColorStop(0, color);
      grad.addColorStop(0.2, "rgba(255,255,255,0.9)");
      grad.addColorStop(0.4, "rgba(255,255,255,0.5)");
      grad.addColorStop(1, "rgba(255,255,255,0)");
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, size, size);
      return canvas;
    }

    // Create layered stars/dust
    const starsFar = makeStars(1200, [0.02, 0.08], 120, 0xffffff, 0.45);
    const starsMid = makeStars(700, [0.04, 0.14], 80, 0xa8d8ff, 0.6);
    const dust = makeStars(220, [0.8, 1.8], 40, 0xfff0ff, 0.08);

    /* ---------------- Animated glow sprite behind hero for focal point ---------------- */
    const glowCanvas = document.createElement('canvas');
    glowCanvas.width = glowCanvas.height = 512;
    const gctx = glowCanvas.getContext('2d');
    const ggrad = gctx.createRadialGradient(256,256,0,256,256,256);
    ggrad.addColorStop(0, "rgba(13,110,253,0.18)");
    ggrad.addColorStop(0.15, "rgba(13,110,253,0.12)");
    ggrad.addColorStop(0.4, "rgba(102,16,242,0.06)");
    ggrad.addColorStop(1, "rgba(0,0,0,0)");
    gctx.fillStyle = ggrad;
    gctx.fillRect(0,0,512,512);
    const glowTex = new THREE.Texture(glowCanvas);
    glowTex.needsUpdate = true;
    const glowMat = new THREE.SpriteMaterial({ map: glowTex, blending: THREE.AdditiveBlending, transparent: true, opacity:0.8, depthWrite:false});
    const glowSprite = new THREE.Sprite(glowMat);
    glowSprite.scale.set(6,3,1);
    glowSprite.position.set(0,-0.8,-6);
    scene.add(glowSprite);

    /* ---------------- Mouse parallax & Scroll parallax ---------------- */
    let mouseX = 0, mouseY = 0;
    window.addEventListener('mousemove', (e)=>{
      mouseX = (e.clientX / window.innerWidth) * 2 - 1;
      mouseY = (e.clientY / window.innerHeight) * 2 - 1;
    }, {passive:true});

    let lastTime = performance.now();

    /* ---------------- Animation Loop ---------------- */
    function animate(now){
      const dt = (now - lastTime) * 0.001;
      lastTime = now;

      // parallax camera small rotation towards pointer
      const targetX = mouseX * 0.6;
      const targetY = mouseY * 0.2;
      camera.position.x += (targetX - camera.position.x) * 0.06;
      camera.position.y += (-targetY - camera.position.y) * 0.06;
      camera.lookAt(0,0,0);

      // rotate star groups for subtle motion
      starGroup.rotation.y += 0.0006;
      starGroup.rotation.x += 0.00015;

      // gentle drift of nebula and glow
      if (nebulaMesh) {
        nebulaMesh.material.opacity = 0.5 + Math.sin(now*0.00012) * 0.12;
        nebulaMesh.rotation.z += 0.00007;
      }
      glowSprite.material.opacity = 0.7 + Math.sin(now*0.0012) * 0.08;
      glowSprite.position.x += Math.sin(now*0.0011) * 0.0006;

      // twinkle: change size attr on mid stars
      twinklePoints(starsMid.geometry, now);

      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);

    // Twinkle effect by modulating "size" attribute (we stored sizes in a custom attribute 'aSize')
    function twinklePoints(geometry, t){
      const sizes = geometry.attributes.aSize.array;
      // small per-vertex modulation
      for (let i=0;i<sizes.length;i++){
        sizes[i] = sizes[i] * (0.98 + 0.04 * Math.sin(i*12.9898 + t*0.002 + (i%7)));
      }
      geometry.attributes.aSize.needsUpdate = true;
      // Also update the material's size uniform if needed (we set PointsMaterial.size statically)
    }

    /* ---------------- Responsiveness & Cleanup ---------------- */
    function onResize(){
      renderer.setSize(window.innerWidth, window.innerHeight);
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
    }
    window.addEventListener('resize', onResize, {passive:true});

    // Reduce pixel ratio on page visibility change on low-memory devices
    document.addEventListener('visibilitychange', ()=> {
      if (document.hidden) renderer.setPixelRatio(1);
      else renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    });

    /* ---------------- GSAP Entrance Animations ---------------- */
    gsap.registerPlugin(ScrollTrigger);
    gsap.from("#hero-title", {duration: 1.2, y: 40, opacity:0, ease:"power3.out"});
    gsap.from(".hero-subtle", {duration:1.4, opacity:0, y:12, delay:.15});
    gsap.utils.toArray("section").forEach((sec) => {
      gsap.from(sec, {
        scrollTrigger: { trigger: sec, start: "top 85%" },
        y: 30, opacity: 0, duration: 0.9, ease: "power2.out", stagger: 0.08
      });
    });

    /* ---------------- Accessibility / fallback notes ---------------- */
    // Keep canvas non-interfering: pointer-events none (set in CSS) so forms/buttons remain interactive.
  })();
  </script>
</body>
</html>
